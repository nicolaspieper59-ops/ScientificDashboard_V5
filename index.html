<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>PROVIDENCE V17-ULTIMA | HARD_SCIENCE_PURE</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.js"></script>
    <style>
        :root {
            --bg: #000; --accent: #00ff88; --blue: #00c3ff; --gold: #ffd700;
            --plasma: #ff4400; --warp: #7700ff;
        }
        body {
            background: var(--bg); color: #e0e0e0; font-family: 'JetBrains Mono', monospace;
            margin: 0; height: 100vh; display: flex; flex-direction: column; overflow: hidden;
        }
        header {
            padding: 10px 20px; border-bottom: 2px solid var(--accent);
            display: flex; justify-content: space-between; align-items: center;
        }
        .main-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; padding: 10px; flex: 1;
        }
        .panel {
            background: rgba(10,10,15,0.98); border: 1px solid #222; padding: 12px;
            display: flex; flex-direction: column; position: relative;
        }
        .val { color: var(--accent); font-weight: bold; float: right; }
        .unit { font-size: 0.6rem; color: #666; margin-left: 4px; }
        #video-slam { width: 100%; height: 150px; background: #000; border: 1px solid #333; object-fit: cover; }
        .distortion-active { box-shadow: inset 0 0 30px var(--warp); border-color: var(--warp); }
        .plasma-active { box-shadow: inset 0 0 30px var(--plasma); border-color: var(--plasma); }
        h2 { font-size: 0.7rem; color: var(--blue); margin-bottom: 10px; border-bottom: 1px solid #333; }
        .spectrum { height: 10px; width: 100%; background: linear-gradient(to right, red, yellow, green, cyan, blue); margin-top: 5px; position: relative; }
        #doppler-line { position: absolute; height: 100%; width: 2px; background: #fff; left: 50%; transition: 0.1s; }
    </style>
</head>
<body>

<header>
    <div>
        <div style="font-size:1.2rem; font-weight:900; letter-spacing:2px;">PROVIDENCE V17-ULTIMA</div>
        <div id="status" style="font-size:0.6rem; color:var(--gold);">STATUS: CALCUL_PHYSIQUE_FONDAMENTALE</div>
    </div>
    <div id="v-display" style="font-size: 2.5rem; color: var(--accent); font-family: 'Orbitron';">0.000000</div>
    <div style="text-align: right;">
        <div id="t-dilation-label" style="font-size:0.8rem; color:var(--warp);">$\gamma$: 1.000000</div>
        <div id="local-clock" style="font-size:0.7rem;">00:00:00.000</div>
    </div>
</header>

<main class="main-grid">
    <div class="panel" id="optical-panel">
        <h2><i class="fas fa-camera"></i> FLUX_OPTIQUE_DOPPLER</h2>
        <video id="video-slam" autoplay playsinline></video>
        <div class="spectrum"><div id="doppler-line"></div></div>
        <div style="margin-top:10px;">
            <div class="data-point">Décalage (z) <span class="val" id="ui-z-shift">0.0000</span></div>
            <div class="data-point">Réfraction <span class="val" id="ui-refrac">1.000293</span></div>
        </div>
    </div>

    <div class="panel">
        <h2><i class="fas fa-microchip"></i> ECEF_ABSOLU (X,Y,Z)</h2>
        <div class="data-point">COORD_X <span class="val" id="coord-x">0</span><span class="unit">m</span></div>
        <div class="data-point">COORD_Y <span class="val" id="coord-y">0</span><span class="unit">m</span></div>
        <div class="data-point">COORD_Z <span class="val" id="coord-z">0</span><span class="unit">m</span></div>
        <div class="data-point">Gravité ($g$) <span class="val" id="ui-g">9.80665</span><span class="unit">m/s²</span></div>
    </div>

    <div class="panel" id="thermal-panel">
        <h2><i class="fas fa-fire"></i> FLUID_DYNAMICS_KERN</h2>
        <div class="data-point">Mach Number <span class="val" id="ui-mach">0.000</span></div>
        <div class="data-point">Pression Dyn. <span class="val" id="ui-q">0.00</span><span class="unit">Pa</span></div>
        <div class="data-point">Temp. Bouclier <span class="val" id="ui-t">288</span><span class="unit">K</span></div>
        <div class="data-point">Flux (Q) <span class="val" id="ui-flux">0.00</span><span class="unit">W/m²</span></div>
    </div>

    <div class="panel">
        <h2><i class="fas fa-terminal"></i> MISSION_LOG</h2>
        <div id="log" style="font-size:0.6rem; color:var(--gold); flex:1; overflow-y:auto;"></div>
        <button onclick="ENGINE.init()" style="width:100%; background:var(--accent); border:none; padding:12px; font-weight:bold; cursor:pointer; margin-top:10px;">DÉCOLLAGE_V17</button>
    </div>
</main>

<script>
const ENGINE = {
    state: { v: 0, h: 0, lat: 48.8, lon: 2.3, temp: 15, lastT: Date.now() },
    const: { c: 299792458, g0: 9.80665, R: 6378137, k: 1.38e-23 },

    init() {
        this.log("INITIALIZING_REAL_PHYSICS_NO_CHEAT...");
        this.setupHardware();
        this.loop();
    },

    setupHardware() {
        navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } })
            .then(s => document.getElementById('video-slam').srcObject = s);
        
        window.addEventListener('devicemotion', e => {
            let a = e.acceleration;
            this.state.v += Math.sqrt(a.x**2 + a.y**2 + a.z**2) * 0.016;
        });
    },

    loop() {
        const { v, h, temp } = this.state;
        const c = this.const.c;

        // 1. Relativité Pure (Einstein)
        const beta = v / c;
        const gamma = 1 / Math.sqrt(1 - beta**2);
        const zShift = Math.sqrt((1 + beta) / (1 - beta)) - 1;

        // 2. Thermodynamique Réelle (Sutherland & Mach)
        const tempK = temp + 273.15;
        const speedOfSound = Math.sqrt(1.4 * 287 * tempK);
        const mach = v / speedOfSound;
        const rho = 1.225 * Math.exp(-h / 8500);
        const q = 0.5 * rho * v**2;

        // 3. Mise à jour Visuelle
        document.getElementById('v-display').innerText = v.toFixed(6);
        document.getElementById('t-dilation-label').innerText = "γ: " + gamma.toFixed(12);
        document.getElementById('ui-mach').innerText = mach.toFixed(3);
        document.getElementById('ui-z-shift').innerText = zShift.toFixed(6);
        document.getElementById('ui-q').innerText = q.toFixed(2);
        document.getElementById('doppler-line').style.left = (50 + (zShift * 100)) + "%";

        // 4. Gestion des Modes de Réalité
        if(gamma > 1.0001) document.getElementById('optical-panel').classList.add('distortion-active');
        if(mach > 5) document.getElementById('thermal-panel').classList.add('plasma-active');

        document.getElementById('local-clock').innerText = new Date().toISOString().split('T')[1];
        requestAnimationFrame(() => this.loop());
    },

    log(m) {
        const l = document.getElementById('log');
        l.innerHTML = `<div>> ${m}</div>` + l.innerHTML;
    }
};
</script>
</body>
                                                </html>
